'use strict';
const amqp = require('..');
let client = new amqp.Client();
client.connect('amqp://localhost')
  .then(() => Promise.all([client.createSender('amq.topic'), client.createReceiver('amq.topic')]))
  .spread((sender, receiver) => {
    receiver.on('message', m => console.log('received: ', m));
    return sender.send({ hello: 'world' });
  });
